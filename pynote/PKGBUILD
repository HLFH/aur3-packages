# Maintainer: Stefan Tatschner <stefan@sevenbyte.org>

pkgbase=pynote
pkgname=('pynote' 'pynote-docs')
pkgver=1.0.0
pkgrel=1
arch=('any')
url="https://github.com/rumpelsepp/pynote"
license=('MIT')
provides=('pynote')
source=("https://pypi.python.org/packages/source/p/${pkgname}/${pkgname}-${pkgver}.tar.gz")
md5sums=('bf75382505f2715f621c994a3efd7d1b')
install=pynote.install


package_pynote() {
  pkgdesc="Manage notes on the commandline"
  depends=('python' 'python-plaintable' 'python-click' 'python-babel')
  optdepends=('python-pygments: synthax highlighting support')
  makedepends=('python-setuptools')
  conflicts=('pynote-git')
  install=pynote.install

  cd "${srcdir}/${pkgbase}-${pkgver}"
  python setup.py install --prefix=/usr --root="${pkgdir}" --optimize=1
}

package_pynote-docs() {
  pkgdesc="Manpages and HTML documentation for pynote"
  depends=()
  makedepends=('python-sphinx')
  conflicts=('pynote-docs-git')

  cd "${srcdir}/${pkgbase}-${pkgver}/docs"
  make man
  make html

  mkdir -p ${pkgdir}/usr/share/man/man1/
  mkdir -p ${pkgdir}/usr/share/man/man5/
  mkdir -p ${pkgdir}/usr/share/doc/pynote/

  cp -ra man/note.1 ${pkgdir}/usr/share/man/man1/note.1
  cp -ra man/noterc.5 ${pkgdir}/usr/share/man/man5/noterc.5
  cp -ra html/* ${pkgdir}/usr/share/doc/pynote/
}
